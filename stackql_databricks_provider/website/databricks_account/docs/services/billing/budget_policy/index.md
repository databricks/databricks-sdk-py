---
title: budget_policy
hide_title: false
hide_table_of_contents: false
keywords:
  - budget_policy
  - billing
  - databricks_account
  - infrastructure-as-code
  - configuration-as-data
  - cloud inventory
description: Query, deploy and manage databricks_account resources using SQL
custom_edit_url: null
image: /img/stackql-databricks_account-provider-featured-image.png
---

import CopyableCode from '@site/src/components/CopyableCode/CopyableCode';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import SchemaTable from '@site/src/components/SchemaTable/SchemaTable';

Creates, updates, deletes, gets or lists a <code>budget_policy</code> resource.

## Overview
<table><tbody>
<tr><td><b>Name</b></td><td><CopyableCode code="budget_policy" /></td></tr>
<tr><td><b>Type</b></td><td>Resource</td></tr>
<tr><td><b>Id</b></td><td><CopyableCode code="databricks_account.billing.budget_policy" /></td></tr>
</tbody></table>

## Fields

The following fields are returned by `SELECT` queries:

<Tabs
    defaultValue="budget_policy_get"
    values={[
        { label: 'budget_policy_get', value: 'budget_policy_get' },
        { label: 'budget_policy_list', value: 'budget_policy_list' }
    ]}
>
<TabItem value="budget_policy_get">

<SchemaTable fields={[
  {
    "name": "policy_id",
    "type": "string",
    "description": "The Id of the policy. This field is generated by Databricks and globally unique."
  },
  {
    "name": "policy_name",
    "type": "string",
    "description": "The name of the policy. - Must be unique among active policies. - Can contain only characters from the ISO 8859-1 (latin1) set. - Can't start with reserved keywords such as `databricks:default-policy`."
  },
  {
    "name": "binding_workspace_ids",
    "type": "array",
    "description": "List of workspaces that this budget policy will be exclusively bound to. An empty binding implies that this budget policy is open to any workspace in the account."
  },
  {
    "name": "custom_tags",
    "type": "string",
    "description": "A list of tags defined by the customer. At most 20 entries are allowed per policy."
  }
]} />
</TabItem>
<TabItem value="budget_policy_list">

<SchemaTable fields={[
  {
    "name": "policy_id",
    "type": "string",
    "description": "The Id of the policy. This field is generated by Databricks and globally unique."
  },
  {
    "name": "policy_name",
    "type": "string",
    "description": "The name of the policy. - Must be unique among active policies. - Can contain only characters from the ISO 8859-1 (latin1) set. - Can't start with reserved keywords such as `databricks:default-policy`."
  },
  {
    "name": "binding_workspace_ids",
    "type": "array",
    "description": "List of workspaces that this budget policy will be exclusively bound to. An empty binding implies that this budget policy is open to any workspace in the account."
  },
  {
    "name": "custom_tags",
    "type": "string",
    "description": "A list of tags defined by the customer. At most 20 entries are allowed per policy."
  }
]} />
</TabItem>
</Tabs>

## Methods

The following methods are available for this resource:

<table>
<thead>
    <tr>
    <th>Name</th>
    <th>Accessible by</th>
    <th>Required Params</th>
    <th>Optional Params</th>
    <th>Description</th>
    </tr>
</thead>
<tbody>
<tr>
    <td><a href="#budget_policy_get"><CopyableCode code="budget_policy_get" /></a></td>
    <td><CopyableCode code="select" /></td>
    <td><a href="#parameter-account_id"><code>account_id</code></a>, <a href="#parameter-policy_id"><code>policy_id</code></a></td>
    <td></td>
    <td>Retrieves a policy by it's ID.</td>
</tr>
<tr>
    <td><a href="#budget_policy_list"><CopyableCode code="budget_policy_list" /></a></td>
    <td><CopyableCode code="select" /></td>
    <td><a href="#parameter-account_id"><code>account_id</code></a></td>
    <td><a href="#parameter-filter_by"><code>filter_by</code></a>, <a href="#parameter-page_size"><code>page_size</code></a>, <a href="#parameter-page_token"><code>page_token</code></a>, <a href="#parameter-sort_spec"><code>sort_spec</code></a></td>
    <td>Lists all policies. Policies are returned in the alphabetically ascending order of their names.</td>
</tr>
<tr>
    <td><a href="#budget_policy_create"><CopyableCode code="budget_policy_create" /></a></td>
    <td><CopyableCode code="insert" /></td>
    <td><a href="#parameter-account_id"><code>account_id</code></a></td>
    <td></td>
    <td>Creates a new policy.</td>
</tr>
<tr>
    <td><a href="#budget_policy_update"><CopyableCode code="budget_policy_update" /></a></td>
    <td><CopyableCode code="update" /></td>
    <td><a href="#parameter-account_id"><code>account_id</code></a>, <a href="#parameter-policy_id"><code>policy_id</code></a>, <a href="#parameter-policy"><code>policy</code></a></td>
    <td><a href="#parameter-limit_config"><code>limit_config</code></a></td>
    <td>Updates a policy</td>
</tr>
<tr>
    <td><a href="#budget_policy_delete"><CopyableCode code="budget_policy_delete" /></a></td>
    <td><CopyableCode code="delete" /></td>
    <td><a href="#parameter-account_id"><code>account_id</code></a>, <a href="#parameter-policy_id"><code>policy_id</code></a></td>
    <td></td>
    <td>Deletes a policy</td>
</tr>
</tbody>
</table>

## Parameters

Parameters can be passed in the `WHERE` clause of a query. Check the [Methods](#methods) section to see which parameters are required or optional for each operation.

<table>
<thead>
    <tr>
    <th>Name</th>
    <th>Datatype</th>
    <th>Description</th>
    </tr>
</thead>
<tbody>
<tr id="parameter-account_id">
    <td><CopyableCode code="account_id" /></td>
    <td><code>string</code></td>
    <td></td>
</tr>
<tr id="parameter-policy_id">
    <td><CopyableCode code="policy_id" /></td>
    <td><code>string</code></td>
    <td>The Id of the policy.</td>
</tr>
<tr id="parameter-filter_by">
    <td><CopyableCode code="filter_by" /></td>
    <td><code>string</code></td>
    <td>A filter to apply to the list of policies.</td>
</tr>
<tr id="parameter-limit_config">
    <td><CopyableCode code="limit_config" /></td>
    <td><code>string</code></td>
    <td>DEPRECATED. This is redundant field as LimitConfig is part of the BudgetPolicy</td>
</tr>
<tr id="parameter-page_size">
    <td><CopyableCode code="page_size" /></td>
    <td><code>string</code></td>
    <td>The maximum number of budget policies to return. If unspecified, at most 100 budget policies will be returned. The maximum value is 1000; values above 1000 will be coerced to 1000.</td>
</tr>
<tr id="parameter-page_token">
    <td><CopyableCode code="page_token" /></td>
    <td><code>string</code></td>
    <td>A page token, received from a previous `ListServerlessPolicies` call. Provide this to retrieve the subsequent page. If unspecified, the first page will be returned. When paginating, all other parameters provided to `ListServerlessPoliciesRequest` must match the call that provided the page token.</td>
</tr>
<tr id="parameter-sort_spec">
    <td><CopyableCode code="sort_spec" /></td>
    <td><code>string</code></td>
    <td>The sort specification.</td>
</tr>
</tbody>
</table>

## `SELECT` examples

<Tabs
    defaultValue="budget_policy_get"
    values={[
        { label: 'budget_policy_get', value: 'budget_policy_get' },
        { label: 'budget_policy_list', value: 'budget_policy_list' }
    ]}
>
<TabItem value="budget_policy_get">

Retrieves a policy by it's ID.

```sql
SELECT
policy_id,
policy_name,
binding_workspace_ids,
custom_tags
FROM databricks_account.billing.budget_policy
WHERE account_id = '{{ account_id }}' -- required
AND policy_id = '{{ policy_id }}' -- required
;
```
</TabItem>
<TabItem value="budget_policy_list">

Lists all policies. Policies are returned in the alphabetically ascending order of their names.

```sql
SELECT
policy_id,
policy_name,
binding_workspace_ids,
custom_tags
FROM databricks_account.billing.budget_policy
WHERE account_id = '{{ account_id }}' -- required
AND filter_by = '{{ filter_by }}'
AND page_size = '{{ page_size }}'
AND page_token = '{{ page_token }}'
AND sort_spec = '{{ sort_spec }}'
;
```
</TabItem>
</Tabs>


## `INSERT` examples

<Tabs
    defaultValue="budget_policy_create"
    values={[
        { label: 'budget_policy_create', value: 'budget_policy_create' },
        { label: 'Manifest', value: 'manifest' }
    ]}
>
<TabItem value="budget_policy_create">

Creates a new policy.

```sql
INSERT INTO databricks_account.billing.budget_policy (
policy,
request_id,
account_id
)
SELECT 
'{{ policy }}',
'{{ request_id }}',
'{{ account_id }}'
RETURNING
policy_id,
policy_name,
binding_workspace_ids,
custom_tags
;
```
</TabItem>
<TabItem value="manifest">

```yaml
# Description fields are for documentation purposes
- name: budget_policy
  props:
    - name: account_id
      value: string
      description: Required parameter for the budget_policy resource.
    - name: policy
      value: string
      description: |
        The policy to create. `policy_id` needs to be empty as it will be generated `policy_name` must be provided, custom_tags may need to be provided depending on the cloud provider. All other fields are optional.
    - name: request_id
      value: string
      description: |
        A unique identifier for this request. Restricted to 36 ASCII characters. A random UUID is recommended. This request is only idempotent if a `request_id` is provided.
```
</TabItem>
</Tabs>


## `UPDATE` examples

<Tabs
    defaultValue="budget_policy_update"
    values={[
        { label: 'budget_policy_update', value: 'budget_policy_update' }
    ]}
>
<TabItem value="budget_policy_update">

Updates a policy

```sql
UPDATE databricks_account.billing.budget_policy
SET 
policy = '{{ policy }}'
WHERE 
account_id = '{{ account_id }}' --required
AND policy_id = '{{ policy_id }}' --required
AND policy = '{{ policy }}' --required
AND limit_config = '{{ limit_config}}'
RETURNING
policy_id,
policy_name,
binding_workspace_ids,
custom_tags;
```
</TabItem>
</Tabs>


## `DELETE` examples

<Tabs
    defaultValue="budget_policy_delete"
    values={[
        { label: 'budget_policy_delete', value: 'budget_policy_delete' }
    ]}
>
<TabItem value="budget_policy_delete">

Deletes a policy

```sql
DELETE FROM databricks_account.billing.budget_policy
WHERE account_id = '{{ account_id }}' --required
AND policy_id = '{{ policy_id }}' --required
;
```
</TabItem>
</Tabs>
