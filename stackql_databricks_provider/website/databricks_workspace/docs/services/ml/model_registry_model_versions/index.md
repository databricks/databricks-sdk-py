---
title: model_registry_model_versions
hide_title: false
hide_table_of_contents: false
keywords:
  - model_registry_model_versions
  - ml
  - databricks_workspace
  - infrastructure-as-code
  - configuration-as-data
  - cloud inventory
description: Query, deploy and manage databricks_workspace resources using SQL
custom_edit_url: null
image: /img/stackql-databricks_workspace-provider-featured-image.png
---

import CopyableCode from '@site/src/components/CopyableCode/CopyableCode';
import CodeBlock from '@theme/CodeBlock';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import SchemaTable from '@site/src/components/SchemaTable/SchemaTable';

Creates, updates, deletes, gets or lists a <code>model_registry_model_versions</code> resource.

## Overview
<table><tbody>
<tr><td><b>Name</b></td><td><CopyableCode code="model_registry_model_versions" /></td></tr>
<tr><td><b>Type</b></td><td>Resource</td></tr>
<tr><td><b>Id</b></td><td><CopyableCode code="databricks_workspace.ml.model_registry_model_versions" /></td></tr>
</tbody></table>

## Fields

The following fields are returned by `SELECT` queries:

<Tabs
    defaultValue="get"
    values={[
        { label: 'get', value: 'get' },
        { label: 'search', value: 'search' }
    ]}
>
<TabItem value="get">

<SchemaTable fields={[
  {
    "name": "model_version",
    "type": "object",
    "description": "",
    "children": [
      {
        "name": "creation_timestamp",
        "type": "integer",
        "description": ""
      },
      {
        "name": "current_stage",
        "type": "string",
        "description": "Current stage for this `model_version`."
      },
      {
        "name": "description",
        "type": "string",
        "description": "Description of this `model_version`."
      },
      {
        "name": "last_updated_timestamp",
        "type": "integer",
        "description": "Timestamp recorded when metadata for this `model_version` was last updated."
      },
      {
        "name": "name",
        "type": "string",
        "description": "Unique name of the model"
      },
      {
        "name": "run_id",
        "type": "string",
        "description": "MLflow run ID used when creating `model_version`, if `source` was generated by an experiment run stored in MLflow tracking server."
      },
      {
        "name": "run_link",
        "type": "string",
        "description": "Run Link: Direct link to the run that generated this version"
      },
      {
        "name": "source",
        "type": "string",
        "description": "URI indicating the location of the source model artifacts, used when creating `model_version`"
      },
      {
        "name": "status",
        "type": "string",
        "description": "Current status of `model_version` (FAILED_REGISTRATION, PENDING_REGISTRATION, READY)"
      },
      {
        "name": "status_message",
        "type": "string",
        "description": "Details on current `status`, if it is pending or failed."
      },
      {
        "name": "tags",
        "type": "array",
        "description": "Tags: Additional metadata key-value pairs for this `model_version`.",
        "children": [
          {
            "name": "key",
            "type": "string",
            "description": ""
          },
          {
            "name": "value",
            "type": "string",
            "description": "The tag value."
          }
        ]
      },
      {
        "name": "user_id",
        "type": "string",
        "description": "User that created this `model_version`."
      },
      {
        "name": "version",
        "type": "string",
        "description": "Model's version number."
      }
    ]
  }
]} />
</TabItem>
<TabItem value="search">

<SchemaTable fields={[
  {
    "name": "name",
    "type": "string",
    "description": "Unique name of the model"
  },
  {
    "name": "run_id",
    "type": "string",
    "description": "MLflow run ID used when creating `model_version`, if `source` was generated by an experiment run stored in MLflow tracking server."
  },
  {
    "name": "user_id",
    "type": "string",
    "description": "User that created this `model_version`."
  },
  {
    "name": "creation_timestamp",
    "type": "integer",
    "description": ""
  },
  {
    "name": "current_stage",
    "type": "string",
    "description": "Current stage for this `model_version`."
  },
  {
    "name": "description",
    "type": "string",
    "description": "Description of this `model_version`."
  },
  {
    "name": "last_updated_timestamp",
    "type": "integer",
    "description": "Timestamp recorded when metadata for this `model_version` was last updated."
  },
  {
    "name": "run_link",
    "type": "string",
    "description": "Run Link: Direct link to the run that generated this version"
  },
  {
    "name": "source",
    "type": "string",
    "description": "URI indicating the location of the source model artifacts, used when creating `model_version`"
  },
  {
    "name": "status",
    "type": "string",
    "description": "Current status of `model_version` (FAILED_REGISTRATION, PENDING_REGISTRATION, READY)"
  },
  {
    "name": "status_message",
    "type": "string",
    "description": "Details on current `status`, if it is pending or failed."
  },
  {
    "name": "tags",
    "type": "array",
    "description": "Tags: Additional metadata key-value pairs for this `model_version`.",
    "children": [
      {
        "name": "key",
        "type": "string",
        "description": ""
      },
      {
        "name": "value",
        "type": "string",
        "description": "The tag value."
      }
    ]
  },
  {
    "name": "version",
    "type": "string",
    "description": "Model's version number."
  }
]} />
</TabItem>
</Tabs>

## Methods

The following methods are available for this resource:

<table>
<thead>
    <tr>
    <th>Name</th>
    <th>Accessible by</th>
    <th>Required Params</th>
    <th>Optional Params</th>
    <th>Description</th>
    </tr>
</thead>
<tbody>
<tr>
    <td><a href="#get"><CopyableCode code="get" /></a></td>
    <td><CopyableCode code="select" /></td>
    <td><a href="#parameter-name"><code>name</code></a>, <a href="#parameter-version"><code>version</code></a>, <a href="#parameter-deployment_name"><code>deployment_name</code></a></td>
    <td></td>
    <td>Get a model version.</td>
</tr>
<tr>
    <td><a href="#search"><CopyableCode code="search" /></a></td>
    <td><CopyableCode code="select" /></td>
    <td><a href="#parameter-deployment_name"><code>deployment_name</code></a></td>
    <td><a href="#parameter-filter"><code>filter</code></a>, <a href="#parameter-max_results"><code>max_results</code></a>, <a href="#parameter-order_by"><code>order_by</code></a>, <a href="#parameter-page_token"><code>page_token</code></a></td>
    <td>Searches for specific model versions based on the supplied __filter__.</td>
</tr>
<tr>
    <td><a href="#create"><CopyableCode code="create" /></a></td>
    <td><CopyableCode code="insert" /></td>
    <td><a href="#parameter-deployment_name"><code>deployment_name</code></a>, <a href="#parameter-name"><code>name</code></a>, <a href="#parameter-source"><code>source</code></a></td>
    <td></td>
    <td>Creates a model version.</td>
</tr>
<tr>
    <td><a href="#update"><CopyableCode code="update" /></a></td>
    <td><CopyableCode code="update" /></td>
    <td><a href="#parameter-deployment_name"><code>deployment_name</code></a>, <a href="#parameter-name"><code>name</code></a>, <a href="#parameter-version"><code>version</code></a></td>
    <td></td>
    <td>Updates the model version.</td>
</tr>
<tr>
    <td><a href="#delete"><CopyableCode code="delete" /></a></td>
    <td><CopyableCode code="exec" /></td>
    <td><a href="#parameter-name"><code>name</code></a>, <a href="#parameter-version"><code>version</code></a>, <a href="#parameter-deployment_name"><code>deployment_name</code></a></td>
    <td></td>
    <td>Deletes a model version.</td>
</tr>
<tr>
    <td><a href="#delete_tag"><CopyableCode code="delete_tag" /></a></td>
    <td><CopyableCode code="exec" /></td>
    <td><a href="#parameter-name"><code>name</code></a>, <a href="#parameter-version"><code>version</code></a>, <a href="#parameter-key"><code>key</code></a>, <a href="#parameter-deployment_name"><code>deployment_name</code></a></td>
    <td></td>
    <td>Deletes a model version tag.</td>
</tr>
<tr>
    <td><a href="#get_latest"><CopyableCode code="get_latest" /></a></td>
    <td><CopyableCode code="exec" /></td>
    <td><a href="#parameter-deployment_name"><code>deployment_name</code></a>, <a href="#parameter-name"><code>name</code></a></td>
    <td></td>
    <td>Gets the latest version of a registered model.</td>
</tr>
<tr>
    <td><a href="#set_tag"><CopyableCode code="set_tag" /></a></td>
    <td><CopyableCode code="exec" /></td>
    <td><a href="#parameter-deployment_name"><code>deployment_name</code></a>, <a href="#parameter-name"><code>name</code></a>, <a href="#parameter-version"><code>version</code></a>, <a href="#parameter-key"><code>key</code></a>, <a href="#parameter-value"><code>value</code></a></td>
    <td></td>
    <td>Sets a model version tag.</td>
</tr>
</tbody>
</table>

## Parameters

Parameters can be passed in the `WHERE` clause of a query. Check the [Methods](#methods) section to see which parameters are required or optional for each operation.

<table>
<thead>
    <tr>
    <th>Name</th>
    <th>Datatype</th>
    <th>Description</th>
    </tr>
</thead>
<tbody>
<tr id="parameter-deployment_name">
    <td><CopyableCode code="deployment_name" /></td>
    <td><code>string</code></td>
    <td>The Databricks Workspace Deployment Name (default: dbc-abcd0123-a1bc)</td>
</tr>
<tr id="parameter-key">
    <td><CopyableCode code="key" /></td>
    <td><code>string</code></td>
    <td>Name of the tag. The name must be an exact match; wild-card deletion is not supported. Maximum size is 250 bytes.</td>
</tr>
<tr id="parameter-name">
    <td><CopyableCode code="name" /></td>
    <td><code>string</code></td>
    <td>Name of the registered model that the tag was logged under.</td>
</tr>
<tr id="parameter-version">
    <td><CopyableCode code="version" /></td>
    <td><code>string</code></td>
    <td>Model version number that the tag was logged under.</td>
</tr>
<tr id="parameter-filter">
    <td><CopyableCode code="filter" /></td>
    <td><code>string</code></td>
    <td>String filter condition, like "name='my-model-name'". Must be a single boolean condition, with string values wrapped in single quotes.</td>
</tr>
<tr id="parameter-max_results">
    <td><CopyableCode code="max_results" /></td>
    <td><code>integer</code></td>
    <td>Maximum number of models desired. Max threshold is 10K.</td>
</tr>
<tr id="parameter-order_by">
    <td><CopyableCode code="order_by" /></td>
    <td><code>array</code></td>
    <td>List of columns to be ordered by including model name, version, stage with an optional "DESC" or "ASC" annotation, where "ASC" is the default. Tiebreaks are done by latest stage transition timestamp, followed by name ASC, followed by version DESC.</td>
</tr>
<tr id="parameter-page_token">
    <td><CopyableCode code="page_token" /></td>
    <td><code>string</code></td>
    <td>Pagination token to go to next page based on previous search query.</td>
</tr>
</tbody>
</table>

## `SELECT` examples

<Tabs
    defaultValue="get"
    values={[
        { label: 'get', value: 'get' },
        { label: 'search', value: 'search' }
    ]}
>
<TabItem value="get">

Get a model version.

```sql
SELECT
model_version
FROM databricks_workspace.ml.model_registry_model_versions
WHERE name = '{{ name }}' -- required
AND version = '{{ version }}' -- required
AND deployment_name = '{{ deployment_name }}' -- required
;
```
</TabItem>
<TabItem value="search">

Searches for specific model versions based on the supplied __filter__.

```sql
SELECT
name,
run_id,
user_id,
creation_timestamp,
current_stage,
description,
last_updated_timestamp,
run_link,
source,
status,
status_message,
tags,
version
FROM databricks_workspace.ml.model_registry_model_versions
WHERE deployment_name = '{{ deployment_name }}' -- required
AND filter = '{{ filter }}'
AND max_results = '{{ max_results }}'
AND order_by = '{{ order_by }}'
AND page_token = '{{ page_token }}'
;
```
</TabItem>
</Tabs>


## `INSERT` examples

<Tabs
    defaultValue="create"
    values={[
        { label: 'create', value: 'create' },
        { label: 'Manifest', value: 'manifest' }
    ]}
>
<TabItem value="create">

Creates a model version.

```sql
INSERT INTO databricks_workspace.ml.model_registry_model_versions (
name,
source,
description,
run_id,
run_link,
tags,
deployment_name
)
SELECT 
'{{ name }}' /* required */,
'{{ source }}' /* required */,
'{{ description }}',
'{{ run_id }}',
'{{ run_link }}',
'{{ tags }}',
'{{ deployment_name }}'
RETURNING
model_version
;
```
</TabItem>
<TabItem value="manifest">

<CodeBlock language="yaml">{`# Description fields are for documentation purposes
- name: model_registry_model_versions
  props:
    - name: deployment_name
      value: "{{ deployment_name }}"
      description: Required parameter for the model_registry_model_versions resource.
    - name: name
      value: "{{ name }}"
      description: |
        Register model under this name
    - name: source
      value: "{{ source }}"
      description: |
        URI indicating the location of the model artifacts.
    - name: description
      value: "{{ description }}"
      description: |
        Optional description for model version.
    - name: run_id
      value: "{{ run_id }}"
      description: |
        MLflow run ID for correlation, if \`source\` was generated by an experiment run in MLflow tracking server
    - name: run_link
      value: "{{ run_link }}"
      description: |
        MLflow run link - this is the exact link of the run that generated this model version, potentially hosted at another instance of MLflow.
    - name: tags
      description: |
        Additional metadata for model version.
      value:
        - key: "{{ key }}"
          value: "{{ value }}"
`}</CodeBlock>

</TabItem>
</Tabs>


## `UPDATE` examples

<Tabs
    defaultValue="update"
    values={[
        { label: 'update', value: 'update' }
    ]}
>
<TabItem value="update">

Updates the model version.

```sql
UPDATE databricks_workspace.ml.model_registry_model_versions
SET 
name = '{{ name }}',
version = '{{ version }}',
description = '{{ description }}'
WHERE 
deployment_name = '{{ deployment_name }}' --required
AND name = '{{ name }}' --required
AND version = '{{ version }}' --required
RETURNING
model_version;
```
</TabItem>
</Tabs>


## Lifecycle Methods

<Tabs
    defaultValue="delete"
    values={[
        { label: 'delete', value: 'delete' },
        { label: 'delete_tag', value: 'delete_tag' },
        { label: 'get_latest', value: 'get_latest' },
        { label: 'set_tag', value: 'set_tag' }
    ]}
>
<TabItem value="delete">

Deletes a model version.

```sql
EXEC databricks_workspace.ml.model_registry_model_versions.delete 
@name='{{ name }}' --required, 
@version='{{ version }}' --required, 
@deployment_name='{{ deployment_name }}' --required
;
```
</TabItem>
<TabItem value="delete_tag">

Deletes a model version tag.

```sql
EXEC databricks_workspace.ml.model_registry_model_versions.delete_tag 
@name='{{ name }}' --required, 
@version='{{ version }}' --required, 
@key='{{ key }}' --required, 
@deployment_name='{{ deployment_name }}' --required
;
```
</TabItem>
<TabItem value="get_latest">

Gets the latest version of a registered model.

```sql
EXEC databricks_workspace.ml.model_registry_model_versions.get_latest 
@deployment_name='{{ deployment_name }}' --required 
@@json=
'{
"name": "{{ name }}", 
"stages": "{{ stages }}"
}'
;
```
</TabItem>
<TabItem value="set_tag">

Sets a model version tag.

```sql
EXEC databricks_workspace.ml.model_registry_model_versions.set_tag 
@deployment_name='{{ deployment_name }}' --required 
@@json=
'{
"name": "{{ name }}", 
"version": "{{ version }}", 
"key": "{{ key }}", 
"value": "{{ value }}"
}'
;
```
</TabItem>
</Tabs>
