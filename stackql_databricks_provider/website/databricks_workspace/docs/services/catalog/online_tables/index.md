---
title: online_tables
hide_title: false
hide_table_of_contents: false
keywords:
  - online_tables
  - catalog
  - databricks_workspace
  - infrastructure-as-code
  - configuration-as-data
  - cloud inventory
description: Query, deploy and manage databricks_workspace resources using SQL
custom_edit_url: null
image: /img/stackql-databricks_workspace-provider-featured-image.png
---

import CopyableCode from '@site/src/components/CopyableCode/CopyableCode';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import SchemaTable from '@site/src/components/SchemaTable/SchemaTable';

Creates, updates, deletes, gets or lists an <code>online_tables</code> resource.

## Overview
<table><tbody>
<tr><td><b>Name</b></td><td><CopyableCode code="online_tables" /></td></tr>
<tr><td><b>Type</b></td><td>Resource</td></tr>
<tr><td><b>Id</b></td><td><CopyableCode code="databricks_workspace.catalog.online_tables" /></td></tr>
</tbody></table>

## Fields

The following fields are returned by `SELECT` queries:

<Tabs
    defaultValue="get"
    values={[
        { label: 'get', value: 'get' }
    ]}
>
<TabItem value="get">

<SchemaTable fields={[
  {
    "name": "name",
    "type": "string",
    "description": "Full three-part (catalog, schema, table) name of the table."
  },
  {
    "name": "spec",
    "type": "object",
    "description": "Specification of the online table.",
    "children": [
      {
        "name": "perform_full_copy",
        "type": "boolean",
        "description": "Whether to create a full-copy pipeline -- a pipeline that stops after creates a full copy of the source table upon initialization and does not process any change data feeds (CDFs) afterwards. The pipeline can still be manually triggered afterwards, but it always perform a full copy of the source table and there are no incremental updates. This mode is useful for syncing views or tables without CDFs to online tables. Note that the full-copy pipeline only supports \"triggered\" scheduling policy."
      },
      {
        "name": "pipeline_id",
        "type": "string",
        "description": "ID of the associated pipeline. Generated by the server - cannot be set by the caller."
      },
      {
        "name": "primary_key_columns",
        "type": "array",
        "description": "Primary Key columns to be used for data insert/update in the destination."
      },
      {
        "name": "run_continuously",
        "type": "object",
        "description": "Pipeline runs continuously after generating the initial data."
      },
      {
        "name": "run_triggered",
        "type": "object",
        "description": "Pipeline stops after generating the initial data and can be triggered later (manually, through a cron job or through data triggers)"
      },
      {
        "name": "source_table_full_name",
        "type": "string",
        "description": "Three-part (catalog, schema, table) name of the source Delta table."
      },
      {
        "name": "timeseries_key",
        "type": "string",
        "description": "Time series key to deduplicate (tie-break) rows with the same primary key."
      }
    ]
  },
  {
    "name": "status",
    "type": "object",
    "description": "Online Table data synchronization status",
    "children": [
      {
        "name": "continuous_update_status",
        "type": "object",
        "description": "Detailed status of an online table. Shown if the online table is in the ONLINE_CONTINUOUS_UPDATE<br />    or the ONLINE_UPDATING_PIPELINE_RESOURCES state.",
        "children": [
          {
            "name": "initial_pipeline_sync_progress",
            "type": "object",
            "description": "Progress of the initial data synchronization.",
            "children": [
              {
                "name": "estimated_completion_time_seconds",
                "type": "number",
                "description": "The estimated time remaining to complete this update in seconds."
              },
              {
                "name": "latest_version_currently_processing",
                "type": "integer",
                "description": "The source table Delta version that was last processed by the pipeline. The pipeline may not have completely processed this version yet."
              },
              {
                "name": "sync_progress_completion",
                "type": "number",
                "description": "The completion ratio of this update. This is a number between 0 and 1."
              },
              {
                "name": "synced_row_count",
                "type": "integer",
                "description": "The number of rows that have been synced in this update."
              },
              {
                "name": "total_row_count",
                "type": "integer",
                "description": "The total number of rows that need to be synced in this update. This number may be an estimate."
              }
            ]
          },
          {
            "name": "last_processed_commit_version",
            "type": "integer",
            "description": "The last source table Delta version that was synced to the online table. Note that this Delta version may not be completely synced to the online table yet."
          },
          {
            "name": "timestamp",
            "type": "string",
            "description": "The timestamp of the last time any data was synchronized from the source table to the online table."
          }
        ]
      },
      {
        "name": "detailed_state",
        "type": "string",
        "description": "The state of the online table. (OFFLINE, OFFLINE_FAILED, ONLINE, ONLINE_CONTINUOUS_UPDATE, ONLINE_NO_PENDING_UPDATE, ONLINE_PIPELINE_FAILED, ONLINE_TRIGGERED_UPDATE, ONLINE_UPDATING_PIPELINE_RESOURCES, PROVISIONING, PROVISIONING_INITIAL_SNAPSHOT, PROVISIONING_PIPELINE_RESOURCES)"
      },
      {
        "name": "failed_status",
        "type": "object",
        "description": "Detailed status of an online table. Shown if the online table is in the OFFLINE_FAILED or the<br />    ONLINE_PIPELINE_FAILED state.",
        "children": [
          {
            "name": "last_processed_commit_version",
            "type": "integer",
            "description": "The last source table Delta version that was synced to the online table. Note that this Delta version may only be partially synced to the online table. Only populated if the table is still online and available for serving."
          },
          {
            "name": "timestamp",
            "type": "string",
            "description": "The timestamp of the last time any data was synchronized from the source table to the online table. Only populated if the table is still online and available for serving."
          }
        ]
      },
      {
        "name": "message",
        "type": "string",
        "description": "A text description of the current state of the online table."
      },
      {
        "name": "provisioning_status",
        "type": "object",
        "description": "Detailed status of an online table. Shown if the online table is in the<br />    PROVISIONING_PIPELINE_RESOURCES or the PROVISIONING_INITIAL_SNAPSHOT state.",
        "children": [
          {
            "name": "initial_pipeline_sync_progress",
            "type": "object",
            "description": "Details about initial data synchronization. Only populated when in the PROVISIONING_INITIAL_SNAPSHOT state.",
            "children": [
              {
                "name": "estimated_completion_time_seconds",
                "type": "number",
                "description": "The estimated time remaining to complete this update in seconds."
              },
              {
                "name": "latest_version_currently_processing",
                "type": "integer",
                "description": "The source table Delta version that was last processed by the pipeline. The pipeline may not have completely processed this version yet."
              },
              {
                "name": "sync_progress_completion",
                "type": "number",
                "description": "The completion ratio of this update. This is a number between 0 and 1."
              },
              {
                "name": "synced_row_count",
                "type": "integer",
                "description": "The number of rows that have been synced in this update."
              },
              {
                "name": "total_row_count",
                "type": "integer",
                "description": "The total number of rows that need to be synced in this update. This number may be an estimate."
              }
            ]
          }
        ]
      },
      {
        "name": "triggered_update_status",
        "type": "object",
        "description": "Detailed status of an online table. Shown if the online table is in the ONLINE_TRIGGERED_UPDATE<br />    or the ONLINE_NO_PENDING_UPDATE state.",
        "children": [
          {
            "name": "last_processed_commit_version",
            "type": "integer",
            "description": "The last source table Delta version that was synced to the online table. Note that this Delta version may not be completely synced to the online table yet."
          },
          {
            "name": "timestamp",
            "type": "string",
            "description": "The timestamp of the last time any data was synchronized from the source table to the online table."
          },
          {
            "name": "triggered_update_progress",
            "type": "object",
            "description": "Progress of the active data synchronization pipeline.",
            "children": [
              {
                "name": "estimated_completion_time_seconds",
                "type": "number",
                "description": "The estimated time remaining to complete this update in seconds."
              },
              {
                "name": "latest_version_currently_processing",
                "type": "integer",
                "description": "The source table Delta version that was last processed by the pipeline. The pipeline may not have completely processed this version yet."
              },
              {
                "name": "sync_progress_completion",
                "type": "number",
                "description": "The completion ratio of this update. This is a number between 0 and 1."
              },
              {
                "name": "synced_row_count",
                "type": "integer",
                "description": "The number of rows that have been synced in this update."
              },
              {
                "name": "total_row_count",
                "type": "integer",
                "description": "The total number of rows that need to be synced in this update. This number may be an estimate."
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "name": "table_serving_url",
    "type": "string",
    "description": "Data serving REST API URL for this table"
  },
  {
    "name": "unity_catalog_provisioning_state",
    "type": "string",
    "description": "The provisioning state of the online table entity in Unity Catalog. This is distinct from the state of the data synchronization pipeline (i.e. the table may be in \"ACTIVE\" but the pipeline may be in \"PROVISIONING\" as it runs asynchronously). (ACTIVE, DEGRADED, DELETING, FAILED, PROVISIONING, UPDATING)"
  }
]} />
</TabItem>
</Tabs>

## Methods

The following methods are available for this resource:

<table>
<thead>
    <tr>
    <th>Name</th>
    <th>Accessible by</th>
    <th>Required Params</th>
    <th>Optional Params</th>
    <th>Description</th>
    </tr>
</thead>
<tbody>
<tr>
    <td><a href="#get"><CopyableCode code="get" /></a></td>
    <td><CopyableCode code="select" /></td>
    <td><a href="#parameter-name"><code>name</code></a>, <a href="#parameter-deployment_name"><code>deployment_name</code></a></td>
    <td></td>
    <td>Get information about an existing online table and its status.</td>
</tr>
<tr>
    <td><a href="#create"><CopyableCode code="create" /></a></td>
    <td><CopyableCode code="insert" /></td>
    <td><a href="#parameter-deployment_name"><code>deployment_name</code></a>, <a href="#parameter-table"><code>table</code></a></td>
    <td></td>
    <td>Create a new Online Table.</td>
</tr>
<tr>
    <td><a href="#delete"><CopyableCode code="delete" /></a></td>
    <td><CopyableCode code="delete" /></td>
    <td><a href="#parameter-name"><code>name</code></a>, <a href="#parameter-deployment_name"><code>deployment_name</code></a></td>
    <td></td>
    <td>Delete an online table. Warning: This will delete all the data in the online table. If the source</td>
</tr>
</tbody>
</table>

## Parameters

Parameters can be passed in the `WHERE` clause of a query. Check the [Methods](#methods) section to see which parameters are required or optional for each operation.

<table>
<thead>
    <tr>
    <th>Name</th>
    <th>Datatype</th>
    <th>Description</th>
    </tr>
</thead>
<tbody>
<tr id="parameter-deployment_name">
    <td><CopyableCode code="deployment_name" /></td>
    <td><code>string</code></td>
    <td>The Databricks Workspace Deployment Name (default: dbc-abcd0123-a1bc)</td>
</tr>
<tr id="parameter-name">
    <td><CopyableCode code="name" /></td>
    <td><code>string</code></td>
    <td>Full three-part (catalog, schema, table) name of the table.</td>
</tr>
</tbody>
</table>

## `SELECT` examples

<Tabs
    defaultValue="get"
    values={[
        { label: 'get', value: 'get' }
    ]}
>
<TabItem value="get">

Get information about an existing online table and its status.

```sql
SELECT
name,
spec,
status,
table_serving_url,
unity_catalog_provisioning_state
FROM databricks_workspace.catalog.online_tables
WHERE name = '{{ name }}' -- required
AND deployment_name = '{{ deployment_name }}' -- required
;
```
</TabItem>
</Tabs>


## `INSERT` examples

<Tabs
    defaultValue="create"
    values={[
        { label: 'create', value: 'create' },
        { label: 'Manifest', value: 'manifest' }
    ]}
>
<TabItem value="create">

Create a new Online Table.

```sql
INSERT INTO databricks_workspace.catalog.online_tables (
table,
deployment_name
)
SELECT 
'{{ table }}' /* required */,
'{{ deployment_name }}'
RETURNING
name,
spec,
status,
table_serving_url,
unity_catalog_provisioning_state
;
```
</TabItem>
<TabItem value="manifest">

```yaml
# Description fields are for documentation purposes
- name: online_tables
  props:
    - name: deployment_name
      value: string
      description: Required parameter for the online_tables resource.
    - name: table
      value: string
      description: |
        Specification of the online table to be created.
```
</TabItem>
</Tabs>


## `DELETE` examples

<Tabs
    defaultValue="delete"
    values={[
        { label: 'delete', value: 'delete' }
    ]}
>
<TabItem value="delete">

Delete an online table. Warning: This will delete all the data in the online table. If the source

```sql
DELETE FROM databricks_workspace.catalog.online_tables
WHERE name = '{{ name }}' --required
AND deployment_name = '{{ deployment_name }}' --required
;
```
</TabItem>
</Tabs>
