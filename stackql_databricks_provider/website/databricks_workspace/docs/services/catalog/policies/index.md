---
title: policies
hide_title: false
hide_table_of_contents: false
keywords:
  - policies
  - catalog
  - databricks_workspace
  - infrastructure-as-code
  - configuration-as-data
  - cloud inventory
description: Query, deploy and manage databricks_workspace resources using SQL
custom_edit_url: null
image: /img/stackql-databricks_workspace-provider-featured-image.png
---

import CopyableCode from '@site/src/components/CopyableCode/CopyableCode';
import CodeBlock from '@theme/CodeBlock';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import SchemaTable from '@site/src/components/SchemaTable/SchemaTable';

Creates, updates, deletes, gets or lists a <code>policies</code> resource.

## Overview
<table><tbody>
<tr><td><b>Name</b></td><td><CopyableCode code="policies" /></td></tr>
<tr><td><b>Type</b></td><td>Resource</td></tr>
<tr><td><b>Id</b></td><td><CopyableCode code="databricks_workspace.catalog.policies" /></td></tr>
</tbody></table>

## Fields

The following fields are returned by `SELECT` queries:

<Tabs
    defaultValue="get"
    values={[
        { label: 'get', value: 'get' },
        { label: 'list', value: 'list' }
    ]}
>
<TabItem value="get">

<SchemaTable fields={[
  {
    "name": "id",
    "type": "string",
    "description": "Unique identifier of the policy. This field is output only and is generated by the system."
  },
  {
    "name": "name",
    "type": "string",
    "description": "Name of the policy. Required on create and optional on update. To rename the policy, set `name` to a different value on update."
  },
  {
    "name": "column_mask",
    "type": "object",
    "description": "Options for column mask policies. Valid only if `policy_type` is `POLICY_TYPE_COLUMN_MASK`. Required on create and optional on update. When specified on update, the new options will replace the existing options as a whole.",
    "children": [
      {
        "name": "function_name",
        "type": "string",
        "description": ""
      },
      {
        "name": "on_column",
        "type": "string",
        "description": "The alias of the column to be masked. The alias must refer to one of matched columns. The values of the column is passed to the column mask function as the first argument. Required on create and update."
      },
      {
        "name": "using",
        "type": "array",
        "description": "Optional list of column aliases or constant literals to be passed as additional arguments to the column mask function. The type of each column should match the positional argument of the column mask function.",
        "children": [
          {
            "name": "alias",
            "type": "string",
            "description": ""
          },
          {
            "name": "constant",
            "type": "string",
            "description": "A constant literal."
          }
        ]
      }
    ]
  },
  {
    "name": "comment",
    "type": "string",
    "description": "Optional description of the policy."
  },
  {
    "name": "created_at",
    "type": "integer",
    "description": "Time at which the policy was created, in epoch milliseconds. Output only."
  },
  {
    "name": "created_by",
    "type": "string",
    "description": "Username of the user who created the policy. Output only."
  },
  {
    "name": "except_principals",
    "type": "array",
    "description": "Optional list of user or group names that should be excluded from the policy."
  },
  {
    "name": "for_securable_type",
    "type": "string",
    "description": "The type of Unity Catalog securable. (CATALOG, CLEAN_ROOM, CONNECTION, CREDENTIAL, EXTERNAL_LOCATION, EXTERNAL_METADATA, FUNCTION, METASTORE, PIPELINE, PROVIDER, RECIPIENT, SCHEMA, SHARE, STAGING_TABLE, STORAGE_CREDENTIAL, TABLE, VOLUME)"
  },
  {
    "name": "match_columns",
    "type": "array",
    "description": "Optional list of condition expressions used to match table columns. Only valid when `for_securable_type` is `TABLE`. When specified, the policy only applies to tables whose columns satisfy all match conditions.",
    "children": [
      {
        "name": "alias",
        "type": "string",
        "description": ""
      },
      {
        "name": "condition",
        "type": "string",
        "description": "The condition expression used to match a table column."
      }
    ]
  },
  {
    "name": "on_securable_fullname",
    "type": "string",
    "description": "Full name of the securable on which the policy is defined. Required on create."
  },
  {
    "name": "on_securable_type",
    "type": "string",
    "description": "The type of Unity Catalog securable. (CATALOG, CLEAN_ROOM, CONNECTION, CREDENTIAL, EXTERNAL_LOCATION, EXTERNAL_METADATA, FUNCTION, METASTORE, PIPELINE, PROVIDER, RECIPIENT, SCHEMA, SHARE, STAGING_TABLE, STORAGE_CREDENTIAL, TABLE, VOLUME)"
  },
  {
    "name": "policy_type",
    "type": "string",
    "description": "Type of the policy. Required on create. (POLICY_TYPE_COLUMN_MASK, POLICY_TYPE_ROW_FILTER)"
  },
  {
    "name": "row_filter",
    "type": "object",
    "description": "Options for row filter policies. Valid only if `policy_type` is `POLICY_TYPE_ROW_FILTER`. Required on create and optional on update. When specified on update, the new options will replace the existing options as a whole.",
    "children": [
      {
        "name": "function_name",
        "type": "string",
        "description": ""
      },
      {
        "name": "using",
        "type": "array",
        "description": "Optional list of column aliases or constant literals to be passed as arguments to the row filter function. The type of each column should match the positional argument of the row filter function.",
        "children": [
          {
            "name": "alias",
            "type": "string",
            "description": ""
          },
          {
            "name": "constant",
            "type": "string",
            "description": "A constant literal."
          }
        ]
      }
    ]
  },
  {
    "name": "to_principals",
    "type": "array",
    "description": ""
  },
  {
    "name": "updated_at",
    "type": "integer",
    "description": "Time at which the policy was last modified, in epoch milliseconds. Output only."
  },
  {
    "name": "updated_by",
    "type": "string",
    "description": "Username of the user who last modified the policy. Output only."
  },
  {
    "name": "when_condition",
    "type": "string",
    "description": "Optional condition when the policy should take effect."
  }
]} />
</TabItem>
<TabItem value="list">

<SchemaTable fields={[
  {
    "name": "id",
    "type": "string",
    "description": "Unique identifier of the policy. This field is output only and is generated by the system."
  },
  {
    "name": "name",
    "type": "string",
    "description": "Name of the policy. Required on create and optional on update. To rename the policy, set `name` to a different value on update."
  },
  {
    "name": "column_mask",
    "type": "object",
    "description": "Options for column mask policies. Valid only if `policy_type` is `POLICY_TYPE_COLUMN_MASK`. Required on create and optional on update. When specified on update, the new options will replace the existing options as a whole.",
    "children": [
      {
        "name": "function_name",
        "type": "string",
        "description": ""
      },
      {
        "name": "on_column",
        "type": "string",
        "description": "The alias of the column to be masked. The alias must refer to one of matched columns. The values of the column is passed to the column mask function as the first argument. Required on create and update."
      },
      {
        "name": "using",
        "type": "array",
        "description": "Optional list of column aliases or constant literals to be passed as additional arguments to the column mask function. The type of each column should match the positional argument of the column mask function.",
        "children": [
          {
            "name": "alias",
            "type": "string",
            "description": ""
          },
          {
            "name": "constant",
            "type": "string",
            "description": "A constant literal."
          }
        ]
      }
    ]
  },
  {
    "name": "comment",
    "type": "string",
    "description": "Optional description of the policy."
  },
  {
    "name": "created_at",
    "type": "integer",
    "description": "Time at which the policy was created, in epoch milliseconds. Output only."
  },
  {
    "name": "created_by",
    "type": "string",
    "description": "Username of the user who created the policy. Output only."
  },
  {
    "name": "except_principals",
    "type": "array",
    "description": "Optional list of user or group names that should be excluded from the policy."
  },
  {
    "name": "for_securable_type",
    "type": "string",
    "description": "The type of Unity Catalog securable. (CATALOG, CLEAN_ROOM, CONNECTION, CREDENTIAL, EXTERNAL_LOCATION, EXTERNAL_METADATA, FUNCTION, METASTORE, PIPELINE, PROVIDER, RECIPIENT, SCHEMA, SHARE, STAGING_TABLE, STORAGE_CREDENTIAL, TABLE, VOLUME)"
  },
  {
    "name": "match_columns",
    "type": "array",
    "description": "Optional list of condition expressions used to match table columns. Only valid when `for_securable_type` is `TABLE`. When specified, the policy only applies to tables whose columns satisfy all match conditions.",
    "children": [
      {
        "name": "alias",
        "type": "string",
        "description": ""
      },
      {
        "name": "condition",
        "type": "string",
        "description": "The condition expression used to match a table column."
      }
    ]
  },
  {
    "name": "on_securable_fullname",
    "type": "string",
    "description": "Full name of the securable on which the policy is defined. Required on create."
  },
  {
    "name": "on_securable_type",
    "type": "string",
    "description": "The type of Unity Catalog securable. (CATALOG, CLEAN_ROOM, CONNECTION, CREDENTIAL, EXTERNAL_LOCATION, EXTERNAL_METADATA, FUNCTION, METASTORE, PIPELINE, PROVIDER, RECIPIENT, SCHEMA, SHARE, STAGING_TABLE, STORAGE_CREDENTIAL, TABLE, VOLUME)"
  },
  {
    "name": "policy_type",
    "type": "string",
    "description": "Type of the policy. Required on create. (POLICY_TYPE_COLUMN_MASK, POLICY_TYPE_ROW_FILTER)"
  },
  {
    "name": "row_filter",
    "type": "object",
    "description": "Options for row filter policies. Valid only if `policy_type` is `POLICY_TYPE_ROW_FILTER`. Required on create and optional on update. When specified on update, the new options will replace the existing options as a whole.",
    "children": [
      {
        "name": "function_name",
        "type": "string",
        "description": ""
      },
      {
        "name": "using",
        "type": "array",
        "description": "Optional list of column aliases or constant literals to be passed as arguments to the row filter function. The type of each column should match the positional argument of the row filter function.",
        "children": [
          {
            "name": "alias",
            "type": "string",
            "description": ""
          },
          {
            "name": "constant",
            "type": "string",
            "description": "A constant literal."
          }
        ]
      }
    ]
  },
  {
    "name": "to_principals",
    "type": "array",
    "description": ""
  },
  {
    "name": "updated_at",
    "type": "integer",
    "description": "Time at which the policy was last modified, in epoch milliseconds. Output only."
  },
  {
    "name": "updated_by",
    "type": "string",
    "description": "Username of the user who last modified the policy. Output only."
  },
  {
    "name": "when_condition",
    "type": "string",
    "description": "Optional condition when the policy should take effect."
  }
]} />
</TabItem>
</Tabs>

## Methods

The following methods are available for this resource:

<table>
<thead>
    <tr>
    <th>Name</th>
    <th>Accessible by</th>
    <th>Required Params</th>
    <th>Optional Params</th>
    <th>Description</th>
    </tr>
</thead>
<tbody>
<tr>
    <td><a href="#get"><CopyableCode code="get" /></a></td>
    <td><CopyableCode code="select" /></td>
    <td><a href="#parameter-on_securable_type"><code>on_securable_type</code></a>, <a href="#parameter-on_securable_fullname"><code>on_securable_fullname</code></a>, <a href="#parameter-name"><code>name</code></a>, <a href="#parameter-deployment_name"><code>deployment_name</code></a></td>
    <td></td>
    <td>Get the policy definition on a securable</td>
</tr>
<tr>
    <td><a href="#list"><CopyableCode code="list" /></a></td>
    <td><CopyableCode code="select" /></td>
    <td><a href="#parameter-on_securable_type"><code>on_securable_type</code></a>, <a href="#parameter-on_securable_fullname"><code>on_securable_fullname</code></a>, <a href="#parameter-deployment_name"><code>deployment_name</code></a></td>
    <td><a href="#parameter-include_inherited"><code>include_inherited</code></a>, <a href="#parameter-max_results"><code>max_results</code></a>, <a href="#parameter-page_token"><code>page_token</code></a></td>
    <td>List all policies defined on a securable. Optionally, the list can include inherited policies defined</td>
</tr>
<tr>
    <td><a href="#create"><CopyableCode code="create" /></a></td>
    <td><CopyableCode code="insert" /></td>
    <td><a href="#parameter-deployment_name"><code>deployment_name</code></a>, <a href="#parameter-policy_info"><code>policy_info</code></a></td>
    <td></td>
    <td>Creates a new policy on a securable. The new policy applies to the securable and all its descendants.</td>
</tr>
<tr>
    <td><a href="#update"><CopyableCode code="update" /></a></td>
    <td><CopyableCode code="update" /></td>
    <td><a href="#parameter-on_securable_type"><code>on_securable_type</code></a>, <a href="#parameter-on_securable_fullname"><code>on_securable_fullname</code></a>, <a href="#parameter-name"><code>name</code></a>, <a href="#parameter-deployment_name"><code>deployment_name</code></a>, <a href="#parameter-policy_info"><code>policy_info</code></a></td>
    <td><a href="#parameter-update_mask"><code>update_mask</code></a></td>
    <td>Update an ABAC policy on a securable.</td>
</tr>
<tr>
    <td><a href="#delete"><CopyableCode code="delete" /></a></td>
    <td><CopyableCode code="delete" /></td>
    <td><a href="#parameter-on_securable_type"><code>on_securable_type</code></a>, <a href="#parameter-on_securable_fullname"><code>on_securable_fullname</code></a>, <a href="#parameter-name"><code>name</code></a>, <a href="#parameter-deployment_name"><code>deployment_name</code></a></td>
    <td></td>
    <td>Delete an ABAC policy defined on a securable.</td>
</tr>
</tbody>
</table>

## Parameters

Parameters can be passed in the `WHERE` clause of a query. Check the [Methods](#methods) section to see which parameters are required or optional for each operation.

<table>
<thead>
    <tr>
    <th>Name</th>
    <th>Datatype</th>
    <th>Description</th>
    </tr>
</thead>
<tbody>
<tr id="parameter-deployment_name">
    <td><CopyableCode code="deployment_name" /></td>
    <td><code>string</code></td>
    <td>The Databricks Workspace Deployment Name (default: dbc-abcd0123-a1bc)</td>
</tr>
<tr id="parameter-name">
    <td><CopyableCode code="name" /></td>
    <td><code>string</code></td>
    <td>Required. The name of the policy to delete</td>
</tr>
<tr id="parameter-on_securable_fullname">
    <td><CopyableCode code="on_securable_fullname" /></td>
    <td><code>string</code></td>
    <td>Required. The fully qualified name of the securable to delete the policy from.</td>
</tr>
<tr id="parameter-on_securable_type">
    <td><CopyableCode code="on_securable_type" /></td>
    <td><code>string</code></td>
    <td>Required. The type of the securable to delete the policy from.</td>
</tr>
<tr id="parameter-include_inherited">
    <td><CopyableCode code="include_inherited" /></td>
    <td><code>boolean</code></td>
    <td>Optional. Whether to include policies defined on parent securables. By default, the inherited policies are not included.</td>
</tr>
<tr id="parameter-max_results">
    <td><CopyableCode code="max_results" /></td>
    <td><code>integer</code></td>
    <td>Optional. Maximum number of policies to return on a single page (page length). - When not set or set to 0, the page length is set to a server configured value (recommended); - When set to a value greater than 0, the page length is the minimum of this value and a server configured value;</td>
</tr>
<tr id="parameter-page_token">
    <td><CopyableCode code="page_token" /></td>
    <td><code>string</code></td>
    <td>Optional. Opaque pagination token to go to next page based on previous query.</td>
</tr>
<tr id="parameter-update_mask">
    <td><CopyableCode code="update_mask" /></td>
    <td><code>string</code></td>
    <td>Optional. The update mask field for specifying user intentions on which fields to update in the request.</td>
</tr>
</tbody>
</table>

## `SELECT` examples

<Tabs
    defaultValue="get"
    values={[
        { label: 'get', value: 'get' },
        { label: 'list', value: 'list' }
    ]}
>
<TabItem value="get">

Get the policy definition on a securable

```sql
SELECT
id,
name,
column_mask,
comment,
created_at,
created_by,
except_principals,
for_securable_type,
match_columns,
on_securable_fullname,
on_securable_type,
policy_type,
row_filter,
to_principals,
updated_at,
updated_by,
when_condition
FROM databricks_workspace.catalog.policies
WHERE on_securable_type = '{{ on_securable_type }}' -- required
AND on_securable_fullname = '{{ on_securable_fullname }}' -- required
AND name = '{{ name }}' -- required
AND deployment_name = '{{ deployment_name }}' -- required
;
```
</TabItem>
<TabItem value="list">

List all policies defined on a securable. Optionally, the list can include inherited policies defined

```sql
SELECT
id,
name,
column_mask,
comment,
created_at,
created_by,
except_principals,
for_securable_type,
match_columns,
on_securable_fullname,
on_securable_type,
policy_type,
row_filter,
to_principals,
updated_at,
updated_by,
when_condition
FROM databricks_workspace.catalog.policies
WHERE on_securable_type = '{{ on_securable_type }}' -- required
AND on_securable_fullname = '{{ on_securable_fullname }}' -- required
AND deployment_name = '{{ deployment_name }}' -- required
AND include_inherited = '{{ include_inherited }}'
AND max_results = '{{ max_results }}'
AND page_token = '{{ page_token }}'
;
```
</TabItem>
</Tabs>


## `INSERT` examples

<Tabs
    defaultValue="create"
    values={[
        { label: 'create', value: 'create' },
        { label: 'Manifest', value: 'manifest' }
    ]}
>
<TabItem value="create">

Creates a new policy on a securable. The new policy applies to the securable and all its descendants.

```sql
INSERT INTO databricks_workspace.catalog.policies (
policy_info,
deployment_name
)
SELECT 
'{{ policy_info }}' /* required */,
'{{ deployment_name }}'
RETURNING
id,
name,
column_mask,
comment,
created_at,
created_by,
except_principals,
for_securable_type,
match_columns,
on_securable_fullname,
on_securable_type,
policy_type,
row_filter,
to_principals,
updated_at,
updated_by,
when_condition
;
```
</TabItem>
<TabItem value="manifest">

<CodeBlock language="yaml">{`# Description fields are for documentation purposes
- name: policies
  props:
    - name: deployment_name
      value: "{{ deployment_name }}"
      description: Required parameter for the policies resource.
    - name: policy_info
      description: |
        Required. The policy to create.
      value:
        to_principals:
          - "{{ to_principals }}"
        for_securable_type: "{{ for_securable_type }}"
        policy_type: "{{ policy_type }}"
        column_mask:
          function_name: "{{ function_name }}"
          on_column: "{{ on_column }}"
          using:
            - alias: "{{ alias }}"
              constant: "{{ constant }}"
        comment: "{{ comment }}"
        created_at: {{ created_at }}
        created_by: "{{ created_by }}"
        except_principals:
          - "{{ except_principals }}"
        id: "{{ id }}"
        match_columns:
          - alias: "{{ alias }}"
            condition: "{{ condition }}"
        name: "{{ name }}"
        on_securable_fullname: "{{ on_securable_fullname }}"
        on_securable_type: "{{ on_securable_type }}"
        row_filter:
          function_name: "{{ function_name }}"
          using:
            - alias: "{{ alias }}"
              constant: "{{ constant }}"
        updated_at: {{ updated_at }}
        updated_by: "{{ updated_by }}"
        when_condition: "{{ when_condition }}"
`}</CodeBlock>

</TabItem>
</Tabs>


## `UPDATE` examples

<Tabs
    defaultValue="update"
    values={[
        { label: 'update', value: 'update' }
    ]}
>
<TabItem value="update">

Update an ABAC policy on a securable.

```sql
UPDATE databricks_workspace.catalog.policies
SET 
policy_info = '{{ policy_info }}'
WHERE 
on_securable_type = '{{ on_securable_type }}' --required
AND on_securable_fullname = '{{ on_securable_fullname }}' --required
AND name = '{{ name }}' --required
AND deployment_name = '{{ deployment_name }}' --required
AND policy_info = '{{ policy_info }}' --required
AND update_mask = '{{ update_mask}}'
RETURNING
id,
name,
column_mask,
comment,
created_at,
created_by,
except_principals,
for_securable_type,
match_columns,
on_securable_fullname,
on_securable_type,
policy_type,
row_filter,
to_principals,
updated_at,
updated_by,
when_condition;
```
</TabItem>
</Tabs>


## `DELETE` examples

<Tabs
    defaultValue="delete"
    values={[
        { label: 'delete', value: 'delete' }
    ]}
>
<TabItem value="delete">

Delete an ABAC policy defined on a securable.

```sql
DELETE FROM databricks_workspace.catalog.policies
WHERE on_securable_type = '{{ on_securable_type }}' --required
AND on_securable_fullname = '{{ on_securable_fullname }}' --required
AND name = '{{ name }}' --required
AND deployment_name = '{{ deployment_name }}' --required
;
```
</TabItem>
</Tabs>
