{{range .Packages}}
import databricks.sdk.service.{{.Name}} as {{.Name}}{{end}}
import databricks.sdk.core as client
import databricks.sdk.dbutils as dbutils
import databricks.sdk.mixins.dbfs as dbfs_mixin
import databricks.sdk.mixins.compute as compute_mixin

{{$args := list "host" "account_id" "username" "password" "client_id" "client_secret"
  "token" "profile" "config_file" "azure_workspace_resource_id" "azure_client_secret"
  "azure_client_id" "azure_tenant_id" "azure_environment" "auth_type" "cluster_id"}}

class WorkspaceClient:
    def __init__(self, *{{range $args}}, {{.}}: str = None{{end}},
                 debug_truncate_bytes: int = None,
                 debug_headers: int = None,
                 product="unknown",
                 product_version="0.0.0",
                 credentials_provider: client.CredentialsProvider = None,
                 config: client.Config = None):
        if not config:
          config = client.Config({{range $args}}{{.}}={{.}}, {{end}}
            credentials_provider=credentials_provider,
            debug_truncate_bytes=debug_truncate_bytes,
            debug_headers=debug_headers,
            product=product,
            product_version=product_version)
        self.config = config
        self.dbutils = dbutils.RemoteDbUtils(self.config)
        self.api_client = client.ApiClient(self.config)
        {{- range .Services}}{{if not .IsAccounts}}
        self.{{.SnakeName}} = {{if eq .SnakeName "dbfs"}}dbfs_mixin.DbfsExt{{else if eq .SnakeName "clusters"}}compute_mixin.ClustersExt{{else}}{{.Package.Name}}.{{.Name}}API{{end}}(self.api_client){{end -}}{{end}}

class AccountClient:
    def __init__(self, *{{range $args}}, {{.}}: str = None{{end}},
                 debug_truncate_bytes: int = None,
                 debug_headers: int = None,
                 product="unknown",
                 product_version="0.0.0",
                 credentials_provider: client.CredentialsProvider = None,
                 config: client.Config = None):
        if not config:
          config = client.Config({{range $args}}{{.}}={{.}}, {{end}}
            credentials_provider=credentials_provider,
            debug_truncate_bytes=debug_truncate_bytes,
            debug_headers=debug_headers,
            product=product,
            product_version=product_version)
        self.config = config
        self.api_client = client.ApiClient(self.config)
        {{- range .Services}}{{if .IsAccounts}}
        self.{{.SnakeName}} = {{.Package.Name}}.{{.Name}}API(self.api_client){{end -}}{{end}}
